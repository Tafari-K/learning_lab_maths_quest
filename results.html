<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Your Results ‚Äì Math Quest</title>
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <h1>üéâ You Completed the Challenge!</h1>

  <!-- Results from localStorage -->
  <div id="results-list"></div>

  <!-- Submission Form -->
  <h2>Share Your Achievement</h2>
    <form id="share-form" action="https://formdump.codeinstitute.net" method="POST">
      <input type="text" name="player-name" id="player-name" placeholder="Enter your name" required />
      <input type="hidden" name="game-summary" id="game-summary" />
      <button type="submit">Submit Score</button>
    </form>

<!-- ‚úÖ Button shown after form is submitted -->
  <div id="next-section-wrap" style="display: none; margin-top: 20px;">
    <button onclick="location.href='menu-page.html'">‚û°Ô∏è Continue to Next Challenge</button>
  </div>


    
  <script>
    const resultsContainer = document.getElementById("results-list");
    const stored = localStorage.getItem("mathQuestResults");
    const gameSummaryField = document.getElementById("game-summary");

    if (stored) {
      const results = JSON.parse(stored);
      const list = results.map((item, i) =>
        `<p><strong>Q${i + 1}:</strong> ${item.question} ‚Üí <em>${item.answer}</em></p>`
      ).join("");
      resultsContainer.innerHTML = list;

      // Create a plain-text version for the hidden input
      const summaryText = results.map((item, i) =>
        `Q${i + 1}: ${item.question} ‚Üí ${item.answer}`
      ).join(" | ");

      // Set hidden field value
      gameSummaryField.value = summaryText;
    }

    const form = document.getElementById("share-form");
    const nextSectionWrap = document.getElementById("next-section-wrap");

    form.addEventListener("submit", function () {
    // Let the form submit normally to FormDump
    // But also show the "Continue" button immediately
    nextSectionWrap.style.display = "block";
    });

    
  </script>
</body>
</html>
